
-- =========================
-- DEPARTMENTS
-- =========================
INSERT INTO DEPARTMENTS (id, name) VALUES
('11111111-1111-1111-1111-111111111111', 'Neurologija'),
('22222222-2222-2222-2222-222222222222', 'Kardiologija');

-- =========================
-- ROOMS
-- =========================
INSERT INTO ROOMS (id, departmentID, name) VALUES
('aaaaaaa1-aaaa-aaaa-aaaa-aaaaaaaaaaaa', '11111111-1111-1111-1111-111111111111', 'Neuro soba 1'),
('aaaaaaa2-aaaa-aaaa-aaaa-aaaaaaaaaaab', '11111111-1111-1111-1111-111111111111', 'Neuro soba 2'),
('bbbbbbb1-bbbb-bbbb-bbbb-bbbbbbbbbbbb', '22222222-2222-2222-2222-222222222222', 'Kardio soba 1'),
('bbbbbbb2-bbbb-bbbb-bbbb-bbbbbbbbbbbc', '22222222-2222-2222-2222-222222222222', 'Kardio soba 2');

-- =========================
-- PERSONS (DOCTORS)
-- =========================
INSERT INTO PERSONS (id, name, oib) VALUES
('11111111-aaaa-aaaa-aaaa-aaaaaaaa0001', 'Ivan Barišić', '12232144'),
('11111111-aaaa-aaaa-aaaa-aaaaaaaa0002', 'Marija Novak', '98765432'),
('22222222-bbbb-bbbb-bbbb-bbbbbbbbb001', 'Marko Horvat', '22334455'),
('22222222-bbbb-bbbb-bbbb-bbbbbbbbb002', 'Ivana Križman', '66778899'),
('22222222-bbbb-bbbb-bbbb-bbbbbbbbb003', 'Anja', '66778859');

-- =========================
-- EMPLOYEES
-- =========================
INSERT INTO EMPLOYEES (id, salary) VALUES
('11111111-aaaa-aaaa-aaaa-aaaaaaaa0001', 3000),
('11111111-aaaa-aaaa-aaaa-aaaaaaaa0002', 3100),
('22222222-bbbb-bbbb-bbbb-bbbbbbbbb001', 3200),
('22222222-bbbb-bbbb-bbbb-bbbbbbbbb002', 3300),
('22222222-bbbb-bbbb-bbbb-bbbbbbbbb003', 3400);

-- =========================
-- DOCTORS
-- =========================
INSERT INTO DOCTORS (id, departmentId, specialty) VALUES
('11111111-aaaa-aaaa-aaaa-aaaaaaaa0001', '11111111-1111-1111-1111-111111111111', 'neurolog'),
('11111111-aaaa-aaaa-aaaa-aaaaaaaa0002', '11111111-1111-1111-1111-111111111111', 'neurolog'),
('22222222-bbbb-bbbb-bbbb-bbbbbbbbb001', '22222222-2222-2222-2222-222222222222', 'kardiolog'),
('22222222-bbbb-bbbb-bbbb-bbbbbbbbb002', '22222222-2222-2222-2222-222222222222', 'kardiolog'),
('22222222-bbbb-bbbb-bbbb-bbbbbbbbb003', '22222222-2222-2222-2222-222222222222', 'kardiolog');

-- =========================
-- PERSONS (PATIENTS)
-- =========================
INSERT INTO PERSONS (id, name, oib) VALUES
('aaaaaaa1-aaaa-aaaa-aaaa-aaaaaaaa0001', 'Luka Lukačević', '129495'),
('aaaaaaa2-aaaa-aaaa-aaaa-aaaaaaaa0002', 'Ana Anić', '559912'),
('bbbbbbb1-bbbb-bbbb-bbbb-bbbbbbbbb001', 'Petar Perić', '778899'),
('bbbbbbb2-bbbb-bbbb-bbbb-bbbbbbbbb002', 'Marija Marinković', '443322');

-- =========================
-- PATIENTS
-- =========================
INSERT INTO PATIENTS (id, diagnosis, status, doctorId, roomId, departmentId) VALUES
('aaaaaaa1-aaaa-aaaa-aaaa-aaaaaaaa0001', 'Migrena', 'Hospitaliziran',
 '11111111-aaaa-aaaa-aaaa-aaaaaaaa0001', 'aaaaaaa1-aaaa-aaaa-aaaa-aaaaaaaaaaaa', '11111111-1111-1111-1111-111111111111'),

('aaaaaaa2-aaaa-aaaa-aaaa-aaaaaaaa0002', 'Migrena', 'Na pregledu',
 '11111111-aaaa-aaaa-aaaa-aaaaaaaa0002', 'aaaaaaa2-aaaa-aaaa-aaaa-aaaaaaaaaaab', '11111111-1111-1111-1111-111111111111'),

('bbbbbbb1-bbbb-bbbb-bbbb-bbbbbbbbb001', 'Aritmija', 'Hospitaliziran',
 '22222222-bbbb-bbbb-bbbb-bbbbbbbbb001', 'bbbbbbb1-bbbb-bbbb-bbbb-bbbbbbbbbbbb', '22222222-2222-2222-2222-222222222222'),

('bbbbbbb2-bbbb-bbbb-bbbb-bbbbbbbbb002', 'Hipertenzija', 'Na pregledu',
 '22222222-bbbb-bbbb-bbbb-bbbbbbbbb002', 'bbbbbbb2-bbbb-bbbb-bbbb-bbbbbbbbbbbc', '22222222-2222-2222-2222-222222222222');

-- =========================
-- PERSONS (VISITORS)
-- =========================
INSERT INTO PERSONS (id, name, oib) VALUES
('ccccccc1-cccc-cccc-cccc-cccccccc0001', 'Petra Petrić', '11122233344'),
('ccccccc2-cccc-cccc-cccc-cccccccc0002', 'Luka Lončar', '55566677788');

-- =========================
-- VISITORS
-- =========================
INSERT INTO VISITORS (id, departmentId) VALUES
('ccccccc1-cccc-cccc-cccc-cccccccc0001', '11111111-1111-1111-1111-111111111111'),
('ccccccc2-cccc-cccc-cccc-cccccccc0002', '22222222-2222-2222-2222-222222222222');

-- DROP sekcija
DROP TABLE IF EXISTS UNDERAGEPATIENTS;
DROP TABLE IF EXISTS VISITORS;
DROP TABLE IF EXISTS PATIENTS;
DROP TABLE IF EXISTS DOCTORS;
DROP TABLE IF EXISTS EMPLOYEES;
DROP TABLE IF EXISTS ROOMS;
DROP TABLE IF EXISTS DEPARTMENTS;
DROP TABLE IF EXISTS PERSONS;


-- 1. Nema FK ovisnosti
CREATE TABLE PERSONS (
    id UUID PRIMARY KEY NOT NULL,
    name VARCHAR(50) NOT NULL,
    oib VARCHAR(13) NOT NULL
);

CREATE TABLE DEPARTMENTS (
    id UUID PRIMARY KEY NOT NULL,
    name VARCHAR(50) NOT NULL
);

-- 2. Ovisi o DEPARTMENTS
CREATE TABLE ROOMS (
    id UUID PRIMARY KEY NOT NULL,
    departmentID UUID NOT NULL,
    name VARCHAR(50) NOT NULL,
    FOREIGN KEY (departmentID) REFERENCES DEPARTMENTS(id)
);

-- 3. Ovisi o PERSONS
CREATE TABLE EMPLOYEES (
    id UUID PRIMARY KEY NOT NULL,
    salary DOUBLE NOT NULL,
    FOREIGN KEY (id) REFERENCES PERSONS(id)
);

-- 4. Ovisi o EMPLOYEES i DEPARTMENTS
CREATE TABLE DOCTORS (
    id UUID PRIMARY KEY NOT NULL,
    departmentId UUID NOT NULL,
    specialty VARCHAR(50) NOT NULL,
    FOREIGN KEY (id) REFERENCES EMPLOYEES(id),
    FOREIGN KEY (departmentId) REFERENCES DEPARTMENTS(id)
);

-- 5. Ovisi o PERSONS, DOCTORS, ROOMS, DEPARTMENTS
CREATE TABLE PATIENTS (
    id UUID PRIMARY KEY NOT NULL,
    diagnosis VARCHAR(150) NOT NULL,
    status VARCHAR(40) NOT NULL
    CHECK (status IN ('Hospitaliziran','Otpušten','Na pregledu')),
    createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    doctorId UUID NOT NULL,
    roomId UUID NOT NULL,
    departmentId UUID NOT NULL,
    FOREIGN KEY (id) REFERENCES PERSONS(id),
    FOREIGN KEY (doctorId) REFERENCES DOCTORS(id),
    FOREIGN KEY (roomId) REFERENCES ROOMS(id),
    FOREIGN KEY (departmentId) REFERENCES DEPARTMENTS(id)
);

-- 6. Ovisi o PERSONS i DEPARTMENTS
CREATE TABLE VISITORS (
    id UUID PRIMARY KEY NOT NULL,
    departmentId UUID NOT NULL,
    FOREIGN KEY (id) REFERENCES PERSONS(id),
    FOREIGN KEY (departmentId) REFERENCES DEPARTMENTS(id)
);

-- 7. Ovisi o PATIENTS i VISITORS
CREATE TABLE UNDERAGEPATIENTS (
    id UUID PRIMARY KEY NOT NULL,
    visitorId UUID NOT NULL,
    FOREIGN KEY (id) REFERENCES PATIENTS(id),
    FOREIGN KEY (visitorId) REFERENCES VISITORS(id)
);
